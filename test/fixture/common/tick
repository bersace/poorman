#!/usr/bin/env bash
# tick: echo . .. ..., coordinating over fifo; change . with $DOT.

set -e

common="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
. $common/fifo.bash source

fifo="$1"
shift

wait_for_fifo "$fifo"

dot=${DOT:-.}

echo $dot         ; ping_fifo "$fifo"
echo $dot$dot     ; ping_fifo "$fifo"
echo $dot$dot$dot ; ping_fifo "$fifo"

wait_for_rm_fifo "$fifo"
